# Инструкция по работе с парсером Telegram

Минимальный однопоточный парсер, который подключается к Telegram API и выгружает посты из указанного канала в CSV-файл.  
Используется библиотека **Telethon**, а данные сохраняются в папку `data/`.

---

## 1. Подготовка окружения

### Установка зависимостей
```bash
pip install -r requirements.txt
```

### Создание `.env` файла
Создай `.env` в корне проекта и вставь свои данные:

```
API_ID=123456
API_HASH=your_api_hash_here
SESSION_NAME=tg_session
TG_PHONE=+7XXXXXXXXXX
# TG_2FA=пароль_2FA  # если включена двухфакторная авторизация
```

Эти значения можно получить на [https://my.telegram.org](https://my.telegram.org) → *API development tools*.

---

## 2. Запуск парсера

### Базовый пример
```bash
python parser.py --channel @rbc_news --limit 1000
```

После запуска:
- при первом подключении Telegram попросит код из приложения и (если включено) пароль 2FA;
- создастся файл с данными в `data/`:

```
data/rbc_news.csv
```

---

## 3. Аргументы запуска

| Аргумент | Описание | Пример |
|-----------|-----------|--------|
| `--channel` | username канала | `@rbc_news` |
| `--limit` | сколько сообщений выгрузить | `1000` |
| `--out` | путь к CSV (по желанию) | `--out custom.csv` |
| `--phone` | номер телефона | `--phone +79991234567` |
| `--two_fa` | пароль 2FA | `--two_fa qwerty` |

---

## 4. Пример полного вызова
```bash
python parser.py --channel @tass_agency --limit 500 --out data/tass.csv
```

Результат:
```
saved: data/tass.csv (500 rows)
```

---

## 5. Что дальше

- `data/` — единственная директория, куда сохраняются выгрузки;
- CSV можно сразу использовать для EDA, анализа или загрузки в сервис;
- если нужно спарсить другой канал — просто меняй `--channel`.

---
